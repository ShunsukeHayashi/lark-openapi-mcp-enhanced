# CRM/SFA System Design for Lark Base
## 総合営業支援システム設計書

### システム概要
既存のYouTube動画処理システムと連携した、包括的なCRM/SFA（営業支援自動化）システムを構築します。

---

## 1. コアテーブル設計

### 1.1 営業パイプライン管理 (tbl_sales_pipeline)

#### フィールド構成
| フィールド名 | フィールドタイプ | 設定 | 説明 |
|-------------|-----------------|-----|-----|
| 案件ID | 自動番号 | SL- | 案件の識別子 |
| 案件名 | 単行テキスト | 必須 | 案件の名称 |
| 顧客名 | リンクフィールド | → 顧客管理テーブル | 関連顧客への参照 |
| 営業段階 | 単一選択 | 見込み/商談/提案/成約/完了/失注 | 営業プロセスの進行状況 |
| 予想売上金額 | 数値 | 通貨(円) | 案件の予想売上 |
| 確度 | 数値 | %(0-100) | 成約可能性 |
| 見込み売上 | 計算フィールド | 予想売上×確度÷100 | 加重された予想売上 |
| 担当者 | 人物 | 必須 | 営業担当者 |
| 作成日 | 作成日時 | 自動 | レコード作成日時 |
| 更新日 | 更新日時 | 自動 | 最終更新日時 |
| 商談予定日 | 日付 | - | 次回商談の予定 |
| 関連YouTube動画 | リンクフィールド | → YouTube管理テーブル | 営業資料として使用する動画 |
| 備考 | 複数行テキスト | - | 案件に関する詳細情報 |

#### 営業段階の詳細定義
- **見込み**: 初期接触、ニーズ確認段階
- **商談**: 具体的な商談開始
- **提案**: 正式提案書提出済み
- **成約**: 契約締結済み
- **完了**: プロジェクト完了・納品済み
- **失注**: 案件失注・競合他社決定

### 1.2 顧客管理 (tbl_customer_management)

#### フィールド構成
| フィールド名 | フィールドタイプ | 設定 | 説明 |
|-------------|-----------------|-----|-----|
| 顧客ID | 自動番号 | CU- | 顧客の識別子 |
| 会社名 | 単行テキスト | 必須 | 顧客企業名 |
| 担当者名 | 単行テキスト | 必須 | 主要コンタクト担当者 |
| 電話番号 | 電話番号 | - | 連絡先電話番号 |
| メールアドレス | メール | - | 連絡先メールアドレス |
| 住所 | 複数行テキスト | - | 企業所在地 |
| 業界 | 単一選択 | IT/製造業/小売/金融/その他 | 顧客の業界分類 |
| 企業規模 | 単一選択 | 大企業/中小企業/個人事業主 | 企業の規模分類 |
| 顧客ステータス | 単一選択 | 見込み客/既存客/VIP客/休眠客 | 顧客との関係性 |
| 最終接触日 | 日付 | - | 最後にコンタクトした日 |
| 関連案件数 | 計算フィールド | COUNT(営業パイプライン) | この顧客の案件数 |
| 累計売上 | 計算フィールド | SUM(成約案件の売上) | 過去の総売上金額 |
| 作成日 | 作成日時 | 自動 | レコード作成日時 |
| 担当営業 | 人物 | 必須 | 主担当の営業担当者 |
| 備考 | 複数行テキスト | - | 顧客に関する詳細情報 |

### 1.3 活動履歴 (tbl_activity_history)

#### フィールド構成
| フィールド名 | フィールドタイプ | 設定 | 説明 |
|-------------|-----------------|-----|-----|
| 活動ID | 自動番号 | AC- | 活動の識別子 |
| 活動タイプ | 単一選択 | 電話/メール/商談/プレゼン/訪問/その他 | 活動の種類 |
| 顧客名 | リンクフィールド | → 顧客管理テーブル | 関連顧客 |
| 案件名 | リンクフィールド | → 営業パイプライン | 関連案件（任意） |
| 実施日 | 日付 | 必須 | 活動実施日 |
| 実施時間 | 時刻 | - | 活動実施時刻 |
| 担当者 | 人物 | 必須 | 活動実施者 |
| 活動内容 | 複数行テキスト | 必須 | 活動の詳細内容 |
| 次回予定日 | 日付 | - | 次回フォローアップ予定日 |
| 次回予定内容 | 単行テキスト | - | 次回予定の概要 |
| ステータス | 単一選択 | 完了/予定/キャンセル | 活動の状況 |
| 重要度 | 単一選択 | 高/中/低 | 活動の重要度 |
| 作成日時 | 作成日時 | 自動 | レコード作成日時 |

### 1.4 営業目標・実績 (tbl_sales_targets)

#### フィールド構成
| フィールド名 | フィールドタイプ | 設定 | 説明 |
|-------------|-----------------|-----|-----|
| レコードID | 自動番号 | ST- | レコードの識別子 |
| 対象年月 | 日付 | 必須 | 目標・実績の対象月 |
| 担当者 | 人物 | 必須 | 営業担当者 |
| 月次売上目標 | 数値 | 通貨(円) | 月間売上目標 |
| 見込み売上合計 | 計算フィールド | パイプラインからの集計 | 該当月の見込み売上総額 |
| 実績売上 | 数値 | 通貨(円) | 実際の売上実績 |
| 達成率 | 計算フィールド | 実績÷目標×100 | 目標達成率 |
| 新規顧客数目標 | 数値 | - | 新規顧客獲得目標 |
| 新規顧客数実績 | 数値 | - | 新規顧客獲得実績 |
| 商談数目標 | 数値 | - | 商談件数目標 |
| 商談数実績 | 計算フィールド | パイプラインからの集計 | 該当月の商談件数 |
| 四半期目標 | 数値 | 通貨(円) | 四半期売上目標 |
| 年次目標 | 数値 | 通貨(円) | 年間売上目標 |
| 備考 | 複数行テキスト | - | 目標・実績に関するメモ |

---

## 2. テーブル関係図

```
顧客管理 (Customer) 
    ↓ 1:N
営業パイプライン (Pipeline)
    ↓ 1:N
活動履歴 (Activity)

営業目標・実績 (Targets)
    ← 参照集計 ←
営業パイプライン (Pipeline)

YouTube管理 (既存)
    ↓ N:N
営業パイプライン (Pipeline)
```

---

## 3. 自動化機能の詳細設計

### 3.1 営業アラートシステム

#### アラート条件
1. **案件停滞アラート**
   - 条件: 営業段階が「商談」で更新日から14日経過
   - 通知先: 担当営業＋マネージャー
   - メッセージ: "案件「{案件名}」が2週間更新されていません"

2. **フォローアップアラート**
   - 条件: 活動履歴の「次回予定日」が過去日付
   - 通知先: 担当営業
   - メッセージ: "顧客「{顧客名}」のフォローアップ期限が過ぎています"

3. **月次目標進捗アラート**
   - 条件: 月末5日前で達成率が70%未満
   - 通知先: 担当営業＋マネージャー
   - メッセージ: "月次目標の達成率が{達成率}%です"

### 3.2 自動計算フィールド

#### 営業パイプラインテーブル
```javascript
// 見込み売上の計算
IF(予想売上金額 != BLANK(), 予想売上金額 * 確度 / 100, 0)
```

#### 顧客管理テーブル
```javascript
// 関連案件数の計算
COUNT(営業パイプライン.案件ID)

// 累計売上の計算
SUM(FILTER(営業パイプライン.予想売上金額, 営業パイプライン.営業段階 = "完了"))
```

#### 営業目標・実績テーブル
```javascript
// 達成率の計算
IF(月次売上目標 != 0, 実績売上 / 月次売上目標 * 100, 0)

// 見込み売上合計の計算
SUM(FILTER(営業パイプライン.見込み売上, 
    MONTH(営業パイプライン.商談予定日) = MONTH(対象年月)))
```

---

## 4. ビュー設計

### 4.1 営業パイプライン可視化ビュー

#### かんばんビュー「営業段階別パイプライン」
- グループ化: 営業段階
- 並び順: 見込み売上（降順）
- 表示フィールド: 案件名、顧客名、予想売上金額、担当者
- フィルター: アクティブな案件のみ（営業段階 ≠ 完了、失注）

#### ガントチャートビュー「案件スケジュール」
- 開始日: 作成日
- 終了日: 商談予定日
- グループ化: 担当者
- 表示フィールド: 案件名、営業段階

### 4.2 顧客ステータス別ビュー

#### カードビュー「顧客一覧」
- グループ化: 顧客ステータス
- 並び順: 最終接触日（新しい順）
- 表示フィールド: 会社名、担当者名、関連案件数、累計売上

### 4.3 月次売上実績ダッシュボード

#### 集計ビュー「月次実績サマリー」
- グループ化: 対象年月
- 集計: 目標合計、実績合計、達成率平均
- チャート: 棒グラフ（目標vs実績）

---

## 5. 既存システムとの連携

### 5.1 YouTube動画管理システムとの連携

#### 連携ポイント
1. **営業資料としての動画活用**
   - 営業パイプラインから関連YouTube動画を参照
   - 顧客向けプレゼン資料として動画を利用

2. **活動履歴との連携**
   - 動画を使用したプレゼン活動を記録
   - 動画の効果測定（商談進展率）

#### 実装方法
```javascript
// 営業パイプラインの関連YouTube動画フィールド
// リンクフィールドで既存のYouTube管理テーブルを参照
```

### 5.2 通知システムの活用

#### 既存通知設定の拡張
- CRM専用の通知カテゴリを追加
- 営業アラート用の通知テンプレート作成
- 担当者別の通知設定カスタマイズ

---

## 6. 実装手順

### フェーズ1: 基本テーブル作成
1. 4つのコアテーブルを作成
2. 基本フィールドの設定
3. テーブル間のリンク設定

### フェーズ2: 自動化機能実装
1. 計算フィールドの設定
2. 自動化ルールの作成
3. 通知設定の追加

### フェーズ3: ビュー・ダッシュボード作成
1. 各種ビューの作成
2. ダッシュボードの構築
3. 権限設定の調整

### フェーズ4: 既存システム連携
1. YouTube管理システムとの連携
2. 通知システムの統合
3. データの初期投入

---

## 7. 運用ガイドライン

### 7.1 データ入力ルール
- 新規顧客は必ず顧客管理テーブルから登録
- 案件作成時は必ず関連顧客を設定
- 活動実施後は24時間以内に履歴を記録

### 7.2 メンテナンス
- 月次でデータの整合性チェック
- 四半期で不要なレコードの整理
- 年次でテーブル構造の見直し

---

## 8. 拡張可能性

### 将来的な機能追加
- 売上予測AI
- 顧客行動分析
- マーケティング自動化連携
- 外部CRMシステムとのAPI連携

このCRM/SFAシステムにより、営業プロセスの可視化、効率化、自動化を実現し、売上向上に貢献します。