<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš¨ ç·Šæ€¥æ³¨æ–‡å¯¾å¿œãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            background-color: #f8f9fa;
            color: #212529;
            line-height: 1.5;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            margin-bottom: 30px;
        }
        
        h1 { 
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .last-update { 
            color: #6c757d; 
            font-size: 0.9rem; 
            margin-bottom: 30px;
        }
        
        /* ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚«ãƒ¼ãƒ‰ */
        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .metric-card {
            background: white;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .metric-title {
            font-size: 0.875rem;
            color: #6c757d;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .metric-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #212529;
            line-height: 1.2;
        }
        
        .metric-value.emergency { color: #dc3545; }
        .metric-value.warning { color: #fd7e14; }
        
        /* ãƒãƒ£ãƒ¼ãƒˆã‚¨ãƒªã‚¢ */
        .charts {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .chart-container {
            background: white;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
            min-height: 400px;
            display: flex;
            flex-direction: column;
        }
        
        .chart-container h2 {
            font-size: 1.25rem;
            margin-bottom: 20px;
            color: #212529;
            font-weight: 600;
        }
        
        .chart-wrapper {
            flex: 1;
            position: relative;
        }
        
        /* ãƒ†ãƒ¼ãƒ–ãƒ« */
        .critical-table {
            background: white;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
            overflow-x: auto;
        }
        
        .critical-table h2 {
            font-size: 1.25rem;
            margin-bottom: 20px;
            color: #212529;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }
        
        th, td {
            text-align: left;
            padding: 12px 16px;
            border-bottom: 1px solid #dee2e6;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #495057;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        /* ãƒãƒƒã‚¸ */
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .badge-danger { 
            background-color: #dc3545; 
            color: white; 
        }
        
        .badge-warning { 
            background-color: #fd7e14; 
            color: white; 
        }
        
        .badge-success {
            background-color: #28a745;
            color: white;
        }
        
        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .charts { 
                grid-template-columns: 1fr; 
            }
            
            .metrics {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .metric-value {
                font-size: 2rem;
            }
        }
        
        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100px;
            color: #6c757d;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸš¨ ç·Šæ€¥æ³¨æ–‡å¯¾å¿œãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
            <div class="last-update">æœ€çµ‚æ›´æ–°: <span id="lastUpdate">2025/01/18 15:30:00</span></div>
        </header>

        <!-- ä¸»è¦æŒ‡æ¨™ -->
        <div class="metrics">
            <div class="metric-card">
                <div class="metric-title">ç·å•†å“æ•°</div>
                <div class="metric-value">1,234</div>
            </div>
            <div class="metric-card">
                <div class="metric-title">ç·Šæ€¥ç™ºæ³¨å•†å“</div>
                <div class="metric-value emergency pulse">56</div>
            </div>
            <div class="metric-card">
                <div class="metric-title">ç™ºæ³¨å¾…ã¡å•†å“</div>
                <div class="metric-value warning">23</div>
            </div>
            <div class="metric-card">
                <div class="metric-title">7æ—¥ä»¥å†…ã«åœ¨åº«åˆ‡ã‚Œ</div>
                <div class="metric-value emergency">12</div>
            </div>
        </div>

        <!-- ãƒãƒ£ãƒ¼ãƒˆ -->
        <div class="charts">
            <div class="chart-container">
                <h2>ğŸ“Š åœ¨åº«åˆ‡ã‚Œäºˆæ¸¬åˆ†å¸ƒ</h2>
                <div class="chart-wrapper">
                    <canvas id="stockoutChart"></canvas>
                </div>
            </div>
            <div class="chart-container">
                <h2>ğŸ“ˆ å£²ä¸ŠTOP10å•†å“</h2>
                <div class="chart-wrapper">
                    <canvas id="topSellersChart"></canvas>
                </div>
            </div>
        </div>

        <!-- ç·Šæ€¥å¯¾å¿œå•†å“ãƒªã‚¹ãƒˆ -->
        <div class="critical-table">
            <h2>âš ï¸ ç·Šæ€¥å¯¾å¿œãŒå¿…è¦ãªå•†å“ï¼ˆ7æ—¥ä»¥å†…ã«åœ¨åº«åˆ‡ã‚Œï¼‰</h2>
            <table>
                <thead>
                    <tr>
                        <th>å•†å“å</th>
                        <th>åœ¨åº«åˆ‡ã‚Œã¾ã§</th>
                        <th>ç¾åœ¨åº«æ•°</th>
                        <th>ç™ºæ³¨æ®‹æ•°</th>
                        <th>30æ—¥è²©å£²æ•°</th>
                        <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                    </tr>
                </thead>
                <tbody id="criticalProductsTable">
                    <tr>
                        <td><strong>ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚³ãƒ¼ãƒ’ãƒ¼è±† 1kg</strong></td>
                        <td><span class="badge badge-danger">2æ—¥</span></td>
                        <td>15</td>
                        <td><span class="badge badge-warning">50</span></td>
                        <td>380</td>
                        <td><span class="badge badge-danger">è‡³æ€¥å¯¾å¿œ</span></td>
                    </tr>
                    <tr>
                        <td><strong>ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ç´…èŒ¶ã‚»ãƒƒãƒˆ</strong></td>
                        <td><span class="badge badge-danger">3æ—¥</span></td>
                        <td>8</td>
                        <td>-</td>
                        <td>250</td>
                        <td><span class="badge badge-danger">è‡³æ€¥å¯¾å¿œ</span></td>
                    </tr>
                    <tr>
                        <td><strong>ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã‚®ãƒ•ãƒˆãƒœãƒƒã‚¯ã‚¹</strong></td>
                        <td><span class="badge badge-warning">5æ—¥</span></td>
                        <td>30</td>
                        <td><span class="badge badge-warning">100</span></td>
                        <td>420</td>
                        <td><span class="badge badge-warning">è¦å¯¾å¿œ</span></td>
                    </tr>
                    <tr>
                        <td><strong>æ‰‹ä½œã‚Šã‚¯ãƒƒã‚­ãƒ¼è©°ã‚åˆã‚ã›</strong></td>
                        <td><span class="badge badge-warning">6æ—¥</span></td>
                        <td>45</td>
                        <td>-</td>
                        <td>180</td>
                        <td><span class="badge badge-warning">è¦å¯¾å¿œ</span></td>
                    </tr>
                    <tr>
                        <td><strong>å­£ç¯€é™å®šã‚¸ãƒ£ãƒ ã‚»ãƒƒãƒˆ</strong></td>
                        <td><span class="badge badge-warning">7æ—¥</span></td>
                        <td>22</td>
                        <td><span class="badge badge-success">75</span></td>
                        <td>165</td>
                        <td><span class="badge badge-warning">è¦å¯¾å¿œ</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // ç¾åœ¨æ™‚åˆ»ã‚’è¡¨ç¤º
        function updateTime() {
            const now = new Date();
            const formatted = now.toLocaleString('ja-JP', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('lastUpdate').textContent = formatted;
        }
        updateTime();
        setInterval(updateTime, 60000); // 1åˆ†ã”ã¨ã«æ›´æ–°

        // åœ¨åº«åˆ‡ã‚Œäºˆæ¸¬åˆ†å¸ƒãƒãƒ£ãƒ¼ãƒˆ
        const stockoutCtx = document.getElementById('stockoutChart').getContext('2d');
        new Chart(stockoutCtx, {
            type: 'doughnut',
            data: {
                labels: ['7æ—¥ä»¥å†…', '14æ—¥ä»¥å†…', '30æ—¥ä»¥å†…', '30æ—¥ä»¥ä¸Š'],
                datasets: [{
                    data: [12, 18, 26, 178],
                    backgroundColor: ['#dc3545', '#fd7e14', '#ffc107', '#28a745'],
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 15,
                            font: {
                                size: 14
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const label = context.label || '';
                                const value = context.parsed || 0;
                                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                const percentage = ((value / total) * 100).toFixed(1);
                                return `${label}: ${value}å•†å“ (${percentage}%)`;
                            }
                        }
                    }
                }
            }
        });

        // å£²ä¸ŠTOP10ãƒãƒ£ãƒ¼ãƒˆ
        const topSellersData = [
            { name: 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚³ãƒ¼ãƒ’ãƒ¼è±†', sales: 450, stock: 15, days: 2 },
            { name: 'ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã‚®ãƒ•ãƒˆ', sales: 420, stock: 30, days: 5 },
            { name: 'ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ç´…èŒ¶', sales: 380, stock: 8, days: 3 },
            { name: 'ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ†ã‚£ç·‘èŒ¶', sales: 320, stock: 120, days: 35 },
            { name: 'ã‚¢ãƒ¼ãƒ¢ãƒ³ãƒ‰ã‚¯ãƒƒã‚­ãƒ¼', sales: 280, stock: 45, days: 8 },
            { name: 'èœ‚èœœã‚»ãƒƒãƒˆ', sales: 250, stock: 200, days: 45 },
            { name: 'ãƒ‰ãƒ©ã‚¤ãƒ•ãƒ«ãƒ¼ãƒ„MIX', sales: 220, stock: 85, days: 18 },
            { name: 'ãƒŠãƒƒãƒ„ã‚¢ã‚½ãƒ¼ãƒˆ', sales: 195, stock: 150, days: 40 },
            { name: 'å­£ç¯€é™å®šã‚¸ãƒ£ãƒ ', sales: 165, stock: 22, days: 7 },
            { name: 'ãƒãƒ¼ãƒ–ãƒ†ã‚£ãƒ¼ã‚»ãƒƒãƒˆ', sales: 150, stock: 95, days: 25 }
        ];

        const topSellersCtx = document.getElementById('topSellersChart').getContext('2d');
        new Chart(topSellersCtx, {
            type: 'bar',
            data: {
                labels: topSellersData.map(p => p.name),
                datasets: [{
                    label: '30æ—¥è²©å£²æ•°',
                    data: topSellersData.map(p => p.sales),
                    backgroundColor: topSellersData.map(p => 
                        p.days <= 7 ? '#dc3545' : 
                        p.days <= 14 ? '#fd7e14' : 
                        p.days <= 30 ? '#ffc107' : '#0d6efd'
                    ),
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            afterLabel: function(context) {
                                const product = topSellersData[context.dataIndex];
                                return [
                                    `åœ¨åº«æ•°: ${product.stock}`,
                                    `åœ¨åº«åˆ‡ã‚Œäºˆæ¸¬: ${product.days}æ—¥`
                                ];
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });

        // ãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•æ›´æ–°ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
        function simulateDataUpdate() {
            // ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®å€¤ã‚’å°‘ã—ãƒ©ãƒ³ãƒ€ãƒ ã«å¤‰æ›´
            const metrics = document.querySelectorAll('.metric-value');
            metrics[1].textContent = Math.floor(Math.random() * 10 + 50); // ç·Šæ€¥ç™ºæ³¨å•†å“
            metrics[2].textContent = Math.floor(Math.random() * 5 + 20);  // ç™ºæ³¨å¾…ã¡
            metrics[3].textContent = Math.floor(Math.random() * 5 + 10);  // 7æ—¥ä»¥å†…
        }

        // 10ç§’ã”ã¨ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ï¼ˆãƒ‡ãƒ¢ç”¨ï¼‰
        setInterval(simulateDataUpdate, 10000);
    </script>
</body>
</html>